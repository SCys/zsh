#!/bin/zsh

# execute system profile.d
[[ -f /etc/profile ]] && . /etc/profile

# add more completion
fpath=(~/.zsh/completions $fpath)

. ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh
. ~/.zsh/etc/completion
. ~/.zsh/etc/history
. ~/.zsh/etc/bindkey
. ~/.zsh/etc/alias

#. ~/.zsh/libs/git-prompt.zsh/git-prompt.zsh
# . ~/.zsh/libs/git-prompt.zsh/examples/rprompt.zsh
#. ~/.zsh/libs/git-prompt.zsh/examples/default.zsh

# 颜色
autoload colors;
[[ "${terminfo[colors]}" -ge 8 ]] && colors

# zplug
export ZPLUG_HOME=$HOME/.zsh/libs/zplug
if [ -f $ZPLUG_HOME/init.zsh ]; then
	. $ZPLUG_HOME/init.zsh

	if ! zplug check; then
		zplug install
	fi

	zplug load

	if zplug check b4b4r07/enhancd; then
		export ENHANCD_FILTER=fzf-tmux
	fi

    zplug "woefe/wbase.zsh"
    zplug "woefe/git-prompt.zsh", use:"{git-prompt.zsh,examples/wprompt.zsh}"
    zplug "junegunn/fzf", use:"shell/*.zsh"
    zplug "junegunn/fzf-bin", from:gh-r, as:command, rename-to:fzf, use:"*linux*amd64*"
    zplug "sharkdp/fd", from:gh-r, as:command, rename-to:fd, use:"*x86_64-unknown-linux-gnu.tar.gz"
    zplug "zsh-users/zsh-completions"
    zplug "zsh-users/zsh-autosuggestions"
    zplug "zsh-users/zsh-syntax-highlighting", defer:2
    zplug "zsh-users/zsh-history-substring-search", defer:3
    zplug load
fi
